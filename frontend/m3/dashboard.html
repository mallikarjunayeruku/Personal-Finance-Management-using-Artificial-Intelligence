<!doctype html><html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>LedgerPro â€” Dashboard</title>
<script type="module">import "https://esm.run/@material/web@1/all.js";</script>
<style>
:root{--md-sys-color-primary:#4F46E5;--md-sys-color-on-primary:#FFFFFF;--md-sys-color-secondary:#0EA5E9;--md-sys-color-surface:#0B1020;--md-sys-color-on-surface:#E6E8F4;--md-sys-color-outline:#373D62;--card-bg:#11162A;}
*{box-sizing:border-box}body{margin:0;background:var(--md-sys-color-surface);color:var(--md-sys-color-on-surface);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif}
.card{background:var(--card-bg);border-radius:28px;padding:24px;box-shadow:0 8px 40px rgba(0,0,0,.35)}
.container{max-width:1100px;margin:0 auto;padding:24px}
nav{border-right:1px solid var(--md-sys-color-outline);}table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #202743;font-size:14px}.section{display:none}.section.active{display:block}.header{display:flex;gap:12px;align-items:center;padding:12px 16px;border-bottom:1px solid #202743;position:sticky;top:0;background:var(--md-sys-color-surface);z-index:10}.app{display:grid;grid-template-columns:280px 1fr;min-height:calc(100vh - 56px)}@media(max-width:900px){.app{grid-template-columns:1fr}nav{position:sticky;top:56px;z-index:10}}
</style></head><body>
<div class="header"><div style="font-weight:600">LedgerPro</div><div style="flex:1"></div><md-filled-tonal-button onclick="logout()">Logout</md-filled-tonal-button></div>
<div class="app">
<nav class="container" style="padding-right:0">
  <md-list>
    <md-list-item type="button" onclick="showTab('overview')" headline="Overview"></md-list-item>
    <md-list-item type="button" onclick="showTab('accounts')" headline="Accounts"></md-list-item>
    <md-list-item type="button" onclick="showTab('transactions')" headline="Transactions"></md-list-item>
    <md-list-item type="button" onclick="showTab('bills')" headline="Bills"></md-list-item>
    <md-list-item type="button" onclick="showTab('goals')" headline="Goals"></md-list-item>
    <md-list-item type="button" onclick="showTab('budgets')" headline="Budgets"></md-list-item>
    <md-list-item type="button" onclick="showTab('balances')" headline="Balances"></md-list-item>
    <md-list-item type="button" onclick="showTab('assets')" headline="Assets"></md-list-item>
    <md-list-item type="button" onclick="showTab('devices')" headline="Devices"></md-list-item>
    <md-list-item type="button" onclick="showTab('premium')" headline="Premium"></md-list-item>
    <md-list-item type="button" onclick="showTab('feedback')" headline="Feedback"></md-list-item>
  </md-list>
</nav>
<main class="container" style="padding-left:0">
  <section id="overview" class="section active"><div class="card"><h2>Quick glance</h2><div id="kpis"></div></div></section>
  <section id="accounts" class="section"><div class="card"><h2>Accounts</h2><table id="accounts-table"></table></div></section>
  <section id="transactions" class="section"><div class="card"><h2>Transactions</h2><table id="transactions-table"></table></div></section>
  <section id="bills" class="section"><div class="card"><h2>Bills</h2><table id="bills-table"></table></div></section>
  <section id="goals" class="section"><div class="card"><h2>Goals</h2><table id="goals-table"></table></div></section>
  <section id="budgets" class="section"><div class="card"><h2>Budgets</h2><table id="budgets-table"></table></div></section>
  <section id="balances" class="section"><div class="card"><h2>Account Balances</h2><table id="accbal-table"></table></div><div class="card" style="margin-top:12px"><h2>Balances</h2><table id="bal-table"></table></div></section>
  <section id="assets" class="section"><div class="card"><h2>Assets</h2><table id="assets-table"></table></div></section>
  <section id="devices" class="section"><div class="card"><h2>Devices</h2><table id="devices-table"></table></div><div class="card" style="margin-top:12px"><h2>Login Information</h2><table id="logins-table"></table></div></section>
  <section id="premium" class="section"><div class="card"><h2>Premium</h2><table id="premium-table"></table></div></section>
  <section id="feedback" class="section"><div class="card"><h2>Feedback</h2><table id="feedback-table"></table></div></section>
</main></div>
<script type="module">
function t(){ return localStorage.getItem('lp_token'); } if(!t()){ location.href='/login/'; }
function headers(extra={}){ return Object.assign({'Authorization':'Bearer '+t(),'Content-Type':'application/json'}, extra); }
function showTab(id){ document.querySelectorAll('.section').forEach(s=>s.classList.remove('active')); document.getElementById(id).classList.add('active'); load(id); }
function logout(){ localStorage.removeItem('lp_token'); location.href='/login/'; }
async function api(url, opts={}){ opts.headers=headers(opts.headers||{}); const r=await fetch(url,opts); const txt=await r.text(); try{return JSON.parse(txt)}catch{return txt} }
function table(el, rows, cols){ el.innerHTML='<tr>'+cols.map(c=>'<th>'+c[0]+'</th>').join('')+'</tr>'+rows.map(x=>'<tr>'+cols.map(c=>'<td>'+(x[c[1]]??'')+'</td>').join('')+'</tr>').join(''); }

async function load(id){ if(id==='overview'){ const a=await api('/api/accounts/'); const total=(a.results||[]).reduce((s,x)=>s+parseFloat(x.currentBalance||0),0); document.getElementById('kpis').innerHTML='<div>Total balance: <b>'+total.toFixed(2)+'</b></div>'; }
  if(id==='accounts'){ const d=await api('/api/accounts/'); table(document.getElementById('accounts-table'), d.results||[], [['ID','id'],['Name','accountName'],['Type','accountType'],['Balance','currentBalance']]); }
  if(id==='transactions'){ const d=await api('/api/transactions/'); table(document.getElementById('transactions-table'), d.results||[], [['ID','id'],['Date','transactionDate'],['Name','name'],['Amount','amount'],['Account','account']]); }
  if(id==='bills'){ const d=await api('/api/bills/'); table(document.getElementById('bills-table'), d.results||[], [['ID','id'],['Title','title'],['Amount','amount'],['Repeat','repeat'],['Due','dueDate']]); }
  if(id==='goals'){ const d=await api('/api/goals/'); table(document.getElementById('goals-table'), d.results||[], [['ID','id'],['Name','goalName'],['Amount','amount'],['Saved','savedAmount']]); }
  if(id==='budgets'){ const d=await api('/api/budgets/'); table(document.getElementById('budgets-table'), d.results||[], [['ID','id'],['Title','title'],['Amount','amount']]); }
  if(id==='balances'){ const ab=await api('/api/account-balances/'); table(document.getElementById('accbal-table'), ab.results||[], [['ID','id'],['Month','balanceMonth'],['Income','income'],['Expanses','expanses'],['Balance','balance']]);
                       const b=await api('/api/balances/'); table(document.getElementById('bal-table'), b.results||[], [['ID','id'],['Account Id','accountId'],['Available','available'],['Current','current'],['Limit','limit']]); }
  if(id==='assets'){ const d=await api('/api/assets/'); table(document.getElementById('assets-table'), d.results||[], [['ID','id'],['Name','name'],['Value','value'],['Income','income']]); }
  if(id==='devices'){ const d=await api('/api/devices/'); table(document.getElementById('devices-table'), d.results||[], [['ID','id'],['Device','deviceName'],['Model','model'],['Brand','brand'],['Logged in','isLoggedIn']]); const l=await api('/api/login-info/'); table(document.getElementById('logins-table'), l.results||[], [['ID','id'],['Device','devices'],['Address','address'],['Login','loginDate']]); }
  if(id==='premium'){ const d=await api('/api/premium/'); table(document.getElementById('premium-table'), d.results||[], [['ID','id'],['Plan','plan'],['Active','isActive'],['Will renew','willRenew']]); }
  if(id==='feedback'){ const d=await api('/api/feedback/'); table(document.getElementById('feedback-table'), d.results||[], [['ID','id'],['User','user'],['Rating','rating'],['Tags','tags']]); }
}
load('overview');
</script></body></html>